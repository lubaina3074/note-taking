<!DOCTYPE html>

<html>
<%- include('base', { title: "Folder contents" }) %>

    <body>
        <%- include ('partials/rightMenuFolder') %>
            <div class="folder-contents">
                <ul class="files-list">
                    <% if (fileArray && fileArray.length> 0) { %>
                        <% fileArray.forEach(function (file) { %>
                            <% const fileIdString=file._id.toString(); %>
                                <% const uniqueId=file.metadata.uniqueId; %>
                                    <li class="files-in-folder" data-file-id="<%= file._id %>"
                                        data-unique-id="<%= file.metadata.uniqueId %>">
                                        <div class="file-item" id="file-double-click-trigger">
                                            <a id="file-link-<%=fileIdString%>" href="#"
                                                class="file-double-click-trigger" data-unique-id="<%=uniqueId%>">
                                                <img src="/images/file.png" alt="file" class="file-img" />
                                            </a>
                                            <span class="file-name">
                                                <%=file.filename%>
                                            </span>
                                        </div>
                                    </li>
                                    <% }) %>
                                        <% } else { %>
                                            <li style="margin-left: 240px; margin-top: 100px; font-size: 20px"> No files
                                                added in
                                                this folder </li>
                                            <% } %>
                                                

            </div>
            <button type="button" style="margin-top: 400px; display: flex; justify-content:center" id="backBtn" onclick= "window.history.back()" >Back to Uploads</button>
    </body>

    <script src="/js/rightMenuFolder.js"></script>

    <script>
        document.querySelectorAll('.file-double-click-trigger').forEach(el => {
            el.addEventListener('dblclick', function () {
                const uniqueId = this.dataset.uniqueId;
                location.href = '/notes/edit/' + uniqueId;
            });
        });

    </script>

</html>